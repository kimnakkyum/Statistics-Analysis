# Chi-squre test (교차분석)
## 교차 분석이란?
### 두 범주 형 변수에서 관찰된 빈도가 기대 빈도와 의미 있게 다른지를 검증하기 위해 사용된다. 
### 즉, 두 범주 형 변수 A, B가 종속 사건인지 독립 사건인지 판별하는 것이다.
### 두 변수가 종속 사건일 경우 x² (chi²) 값이 크고, 중요한 feature로서 분류에 용이하다는 의미다 (p-value와 반비례 관계다).

### 아래 두개의 contingency table을 통해 실습해보자. 
### 먼저, 귀무 가설과 대립 가설을 명확하게 설정한다.
#### - 귀무가설 : 종속 변수와 독립 변수가 독립 사건이다.
#### - 대립가설 : 종속 변수와 독립 변수가 종속 사건이다 (=기대 빈도와 차이가 크다).

### 교차 분석 예시 (흡연량과 음주량 사이에 연관성이 있는가 하는 독립성 검정 문제)
![image](https://user-images.githubusercontent.com/86770685/170854251-96eb7473-29f7-484a-832a-2ed87018b575.png)

#### 1) 가설 설정
##### - 귀무가설 : 흡연과 주량은 연관성이 없으므로 독립적이다.
##### - 대립가설 : 흡연과 주량은 연관성이 있으므로 독립적이지 않다.
#### 2) 범주별 기대값 구하기
##### 23에 해당하는 범주의 기대값을 구한다.
##### 전체 대상 500명 중 1갑 이상의 담배를 피우는 사람의 수는 67명이다.
##### 또한 반병 이상의 술을 마시는 사람의 수는 107명이다.
##### 이 범주는 500명 중 67명에 해당되며, 500명 중 107명 공통으로 해당된다.
![image](https://user-images.githubusercontent.com/86770685/170854334-dac200da-edfa-4893-ba70-ad12c13a80f2.png)
##### 이것은 기대값은 아니고 총계가 1일 때의 값인 확률이다.
##### 여기에 500을 곱해야 기대값이 나온다. 즉, 14.338이다.
#### 3) 범주별 chi-square 값 구하기
![image](https://user-images.githubusercontent.com/86770685/170854098-353976f7-d643-4a5e-b6c1-a2766d302b65.png)
##### 관측값이 기대값에서 얼마나 멀리 떨어져 있는가를 알기 위한 척도이다.
##### 위 식을 바탕으로 아래의 chi-square를 범주별로 구할 수 있다.
![image](https://user-images.githubusercontent.com/86770685/170854503-3221153a-7e2f-4f3a-bfb9-b54d6e4478a6.png)
#### 4) 전체 chi-square 값 합치기
##### 12.87 (5.23 + 0.09 + 1.36 + 0.02 + 0.4 + 0.07 + 2.9 + 1.1 + 1.7)
#### 5) chi-square 자유도 구하기
##### 자유도는 자유롭게 움직일 수 있는 변수의 개수이다.
##### 따라서 흡연에 대한 자유는 2 (1갑 이상 피우는 사람, 1갑 이하 피우는 사람, 안피우는 사람), 주량에 대한 자유도 또한 2 (반병 이상, 반병 이하, 안마심)이다.
#### 6) chi-squre 분포표에 따른 유의수준 5%의 chi-squre 값 비교하기
##### chi-squre 분포표에 따른 유의수준 5%의 chi-squre 값은 X^2(4, 0.05) = 9488이다.
##### 이 케이스에서 ch-suqre 값은 12.87이였으므로, 12.87 > 9.49이다.
##### 즉, 귀무가설을 기각할 수 있다.
##### 같은 말로는, 음주량과 흡연량을 독립적이지 않음 (연관성이 있음)을 알 수 있다.
